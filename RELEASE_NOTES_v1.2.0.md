# Dev-Linker v1.2.0 发布说明

**发布日期：** 2025-11-18
**版本：** v1.2.0
**标签：** https://github.com/jiu-qiu-yu/Dev-Linker/releases/tag/v1.2.0

---

## 🎉 版本概述

Dev-Linker v1.2.0 是一个重大功能更新版本，实现了完整的字符串/HEX格式实时转换功能，让 Dev-Linker 具备了专业串口助手的核心功能。

本版本专注于数据格式转换体验的提升，实现了类似专业串口助手的数据处理逻辑，包括实时格式转换、输入验证、自动格式化等关键特性。

---

## ✨ 新增功能

### v1.2.0 (2025-11-18)

#### 1. 发送区域格式转换功能

**自动格式转换**
- 点击 "HEX" 按钮时，输入内容自动转换为HEX显示格式
- 例如：字符串 "AA" → HEX模式显示 "41 41"
- 例如：字符串 "你好" → HEX模式显示 "E4 BD A0 E5 A5 BD"

**自动格式转换（反向）**
- 点击 "字符串" 按钮时，HEX内容自动转换为字符串显示
- 例如：HEX "E4 BD A0 E5 A5 BD" → 字符串模式显示 "你好"
- 例如：HEX "41 41" → 字符串模式显示 "AA"

**HEX输入过滤**
- HEX模式下只能输入有效的HEX字符（0-9, A-F, a-f）
- 非HEX字符（如 TTT、汉字等）自动过滤，输入无效果
- 例如：输入 "aaa" → 自动转换为 "AA"
- 例如：输入 "1234567" → 显示 "12 34 56 7"

**自动格式化显示**
- HEX数据自动按空格分组，每两个字符加一个空格
- 奇数位HEX自动处理（例如：输入 "123" → 显示 "12 3?"）
- 发送时自动转换为紧凑格式（去掉空格）传输

#### 2. 接收区域格式转换功能

**实时格式转换显示**
- 接收到的数据根据当前日志格式实时转换显示
- 例如：接收 "E4 BD A0 E5 A5 BD"，点击 "字符串" 模式 → 显示 "你好"
- 例如：接收 "你好"，点击 "HEX" 模式 → 显示 "E4 BD A0 E5 A5 BD"

**历史日志格式切换**
- 支持切换历史日志的显示格式
- 切换格式时自动转换所有历史日志内容
- 无效HEX转换失败时显示乱码字符（正常现象）

**错误数据处理**
- 接收到无效HEX数据时，自动处理并显示乱码
- 例如：接收到 HEX "AA DD DD" 无法转换为有效字符串 → 显示 "���"

#### 3. 数据验证与清理

**输入验证**
- HEX模式下自动过滤非HEX字符
- 空数据自动拒绝
- 错误数据实时提示

**数据清理**
- 自动移除HEX数据中的空格和特殊字符
- 自动转换为大写格式
- 自动填充奇数位HEX（用0填充）

#### 4. 用户体验优化

**视觉反馈**
- 输入框添加 spellcheck="false" 禁用拼写检查
- 实时格式转换，无需手动操作
- 格式切换时平滑过渡

**性能优化**
- 使用 Vue Watch 监听格式变化
- 高效的数据转换算法
- 批量日志格式转换

---

## 📊 变更统计

- **新增文件：** 0
- **修改文件：** 2
- **新增代码行：** +182
- **删除代码行：** -33
- **净增长：** +149

---

## 🔧 技术实现

### 核心文件
1. **src/renderer/src/utils/data-formatter.ts**
   - 扩展格式转换工具类
   - 新增方法：
     - `stringToHexCompact()` - 字符串转HEX（紧凑格式）
     - `stringToHex()` - 字符串转HEX（带空格格式）
     - `sanitizeHexInput()` - 清理HEX输入
     - `formatHexWithSpaces()` - HEX格式化显示
     - `convert()` - 格式转换
     - `validateAndClean()` - 验证并清理数据

2. **src/renderer/src/components/DataInteraction.vue**
   - 实现实时转换逻辑
   - 新增功能：
     - `@input` 事件处理HEX输入过滤
     - `watch` 监听发送格式变化
     - `watch` 监听日志格式变化
     - `addLog()` 支持格式参数
     - `simulateReceiveData()` 支持格式参数

### 转换示例

| 输入格式 | 输入内容 | HEX显示 | 字符串显示 |
|----------|----------|---------|------------|
| 字符串 | AA | 41 41 | AA |
| 字符串 | 你好 | E4 BD A0 E5 A5 BD | 你好 |
| HEX | 41 41 | 41 41 | AA |
| HEX | E4 BD A0 E5 A5 BD | E4 BD A0 E5 A5 BD | 你好 |
| HEX | AA DD DD | AA DD DD | ��� |
| 字符串 | aaa | 61 61 61 | aaa |
| HEX | 1234567 | 12 34 56 7? | 瞯7 |

---

## 🧪 测试建议

### 发送区域测试

**测试1：字符串→HEX转换**
1. 输入 "jiuqiu"
2. 点击 "HEX" 按钮
3. 验证显示：6A 69 75 71 69 75

**测试2：HEX输入过滤**
1. 切换到HEX模式
2. 输入 "TTT"
3. 验证：输入框为空（被过滤）
4. 输入 "aaa"
5. 验证显示："AA"（自动转换）

**测试3：自动格式化**
1. 切换到HEX模式
2. 输入 "1234567"
3. 验证显示："12 34 56 7?"

### 接收区域测试

**测试4：实时格式转换**
1. 模拟接收 "E4 BD A0 E5 A5 BD"
2. 初始显示为字符串格式（乱码）
3. 点击 "HEX" 按钮
4. 验证显示：E4 BD A0 E5 A5 BD
5. 点击 "字符串" 按钮
6. 验证显示：你好

**测试5：历史日志转换**
1. 接收多条不同格式的数据
2. 切换日志格式
3. 验证所有历史日志都被转换

---

## 📎 相关提交

- `73e1f63` - feat: 实现完整的字符串/HEX格式实时转换功能

---

## 🚀 升级说明

从 v1.1.1 升级到 v1.2.0：

```bash
git pull origin main
npm install
npm run build
```

---

## 🎯 后续计划

v1.3.0 计划功能：
- 数据发送历史记录
- 自定义发送模板
- 数据包时间戳显示
- 发送/接收数据统计

---

## 🙏 致谢

感谢用户的详细需求描述，让我们能够实现如此完善的格式转换功能！

---

**Dev-Linker Team**
